<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Email-Sender</title>
    </head>
    <body>
        <h2>Envoyer un email à l'administration</h2>
        <form id="emailForm">
            <label for="userName">Nom :</label><br />
            <input
                type="text"
                id="userName"
                name="userName"
                required
            /><br /><br />

            <label for="userEmail">Email :</label><br />
            <input
                type="email"
                id="userEmail"
                name="userEmail"
                required
            /><br /><br />

            <button type="submit">Envoyer</button>
        </form>

        <script src="https://cdn.emailjs.com/dist/email.min.latest.js"></script>
        <script>
            (function () {
                emailjs.init("pAadiaV18LAHbOEVb");
            })();

            document
                .getElementById("emailForm")
                .addEventListener("submit", function (event) {
                    event.preventDefault();

                    const serviceID = "service_cg139nf";
                    const templateID = "template_kidxomi";

                    const params = {
                        reply_to: document.getElementById("userEmail").value,
                        user_name: document.getElementById("userName").value,
                    };

                    emailjs.send(serviceID, templateID, params).then(
                        () => {
                            alert("Email envoyé avec succès !");
                            document.getElementById("emailForm").reset();
                        },
                        (error) => {
                            console.error("Erreur:", error);
                            alert("Erreur lors de l'envoi de l'email.");
                        }
                    );
                });
        </script>
    </body>
</html>
